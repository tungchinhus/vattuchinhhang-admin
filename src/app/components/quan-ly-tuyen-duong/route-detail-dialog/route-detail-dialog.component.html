<div class="dialog-container">
  <!-- Dialog Header -->
  <div class="dialog-header">
    <h2 class="dialog-title">{{ title }}</h2>
    <button mat-icon-button (click)="onCancel()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Dialog Content -->
  <div class="dialog-content">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">
      
      <!-- Basic Information Section -->
      <div class="form-section">
        <h3 class="section-title">Thông tin cơ bản</h3>
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Mã Tuyến Xe *</mat-label>
            <mat-select formControlName="maTuyenXe" placeholder="Chọn tuyến xe">
              <mat-option *ngIf="isLoading" disabled>
                <mat-spinner diameter="20"></mat-spinner>
                Đang tải...
              </mat-option>
              <mat-option *ngFor="let route of availableRoutes" [value]="route.maTuyenXe">
                {{ route.tenTuyenXe }}
              </mat-option>
            </mat-select>
            <mat-icon matSuffix>route</mat-icon>
            <mat-error *ngIf="hasFieldError('maTuyenXe')">
              {{ getErrorMessage('maTuyenXe') }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Thứ Tự *</mat-label>
            <input matInput 
                   type="number" 
                   formControlName="thuTu" 
                   placeholder="Nhập thứ tự"
                   min="1" 
                   max="1000">
            <mat-icon matSuffix>sort</mat-icon>
            <mat-error *ngIf="hasFieldError('thuTu')">
              {{ getErrorMessage('thuTu') }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Station Information Section -->
      <div class="form-section">
        <h3 class="section-title">Thông tin điểm dừng</h3>
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Tên Điểm Dừng *</mat-label>
            <input matInput 
                   formControlName="tenDiemDon" 
                   placeholder="Nhập tên điểm dừng"
                   maxlength="100">
            <mat-icon matSuffix>location_on</mat-icon>
            <mat-error *ngIf="hasFieldError('tenDiemDon')">
              {{ getErrorMessage('tenDiemDon') }}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="hint-text">
          <mat-hint>Ví dụ: Bến xe Miền Đông, Ngã 4 Thủ Đức</mat-hint>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" 
                mat-button 
                (click)="onCancel()"
                class="cancel-button">
          <mat-icon>cancel</mat-icon>
          Hủy
        </button>
        
        <button type="submit" 
                mat-raised-button 
                color="primary"
                [disabled]="form.invalid || isLoading"
                class="submit-button">
          <mat-icon>{{ isEditMode ? 'save' : 'add' }}</mat-icon>
          {{ isEditMode ? 'Cập nhật' : 'Thêm mới' }}
        </button>
      </div>
    </form>
  </div>
</div>
